*** Settings ***
Library ExtendedSelenium2Library


*** Variables ***
${Browser}          Firefox
${SiteUrl}          http://localhost:8100/
${InvalidUser}      asd
${InvalidPassword}  asdasd
${ValidUser}        admin
${ValidPassword}    admin
${LoginTitle}       Login
${TasksTitle}        Tasks

*** Keywords ***
Open Browser To Login Page
   open browser    ${SiteUrl}    ${Browser}
   title should be     ${LoginTitle}

Invalid Login
    [Arguments]    ${username}    ${password}
    Input Username    ${username}
    Input User Password    ${password}
    Submit Credentials
    Login Should Have Failed
    
Valid Login
    [Arguments]    ${username}    ${password}
    Input Username    ${username}
    Input User Password    ${password}
    Submit Credentials
    Title Should Be ${TasksTitle}

Input Username
    [Arguments]    ${username}
    Input Text    //input[@ng-model='data.username']    ${username}

Input User Password
    [Arguments]    ${password}
    Input Password    //input[@type='password']    ${password}
    
Submit Credentials
    Click Button    ///button[@ng-click='login()']

Login Should Have Failed
    Title Should Be      ${LoginTitle}
    Element Should Contain    //div[@class='popup']   unauthorized
    
Click Popup Ok
    Click Button      //button[contains(.,'OK')]
